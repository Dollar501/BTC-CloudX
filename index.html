<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>BTC-CloudX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --tg-theme-bg-color: #0d1117;
            --tg-theme-text-color: #e6edf3;
            --tg-theme-hint-color: #7d8590;
            --tg-theme-link-color: #58a6ff;
            --tg-theme-button-color: #238636;
            --tg-theme-button-text-color: #ffffff;
            --tg-theme-secondary-bg-color: #161b22;
        }
        body {
            background-color: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding-bottom: 80px; /* Space for bottom nav */
            background-image: url('https://www.transparenttextures.com/patterns/cubes.png');
            background-attachment: fixed;
        }
        .page { display: none; animation: fadeIn 0.5s; }
        .page.active { display: block; }
        .bottom-nav {
            background-color: rgba(22, 27, 34, 0.8);
            backdrop-filter: blur(10px);
            border-top: 1px solid #30363d;
        }
        .nav-btn.active { color: var(--tg-theme-button-color); border-top: 2px solid var(--tg-theme-button-color); }
        .form-input, .form-select, .form-range {
            background-color: #010409;
            border: 1px solid #30363d;
            color: var(--tg-theme-text-color);
        }
        .form-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--tg-theme-button-color);
            cursor: pointer;
            border-radius: 50%;
        }
        .form-range::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--tg-theme-button-color);
            cursor: pointer;
            border-radius: 50%;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: var(--tg-theme-secondary-bg-color);
            margin: auto;
            padding: 20px;
            border: 1px solid #30363d;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            animation: fadeIn 0.3s;
        }
        .close-button {
            color: var(--tg-theme-hint-color);
            float: left; /* RTL support */
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover, .close-button:focus {
            color: #fff;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="antialiased">

    <main class="p-4 space-y-6">
        <!-- Page: Home -->
        <section id="home-page" class="page active text-center">
            <img src="img/logo.png" alt="BTC-CloudX Logo" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-green-500 shadow-lg">
            <h1 class="text-4xl font-bold text-white">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ BTC-CloudX</h1>
            <p class="text-lg text-gray-300 mt-2">Ø¨ÙˆØ§Ø¨ØªÙƒ Ø§Ù„Ø¢Ù…Ù†Ø© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ. Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ù…Ø¹Ù†Ø§ Ø§Ù„ÙŠÙˆÙ….</p>
        </section>

        <!-- Page: Investment Plans -->
        <section id="plans-page" class="page">
            <h1 class="text-3xl font-bold mb-4">ğŸ“Š Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h1>
            <div id="plans-container" class="space-y-5">
                <!-- Plan cards will be injected here -->
            </div>
        </section>

        <!-- Page: Our Hardware -->
        <section id="hardware-page" class="page">
            <h1 class="text-3xl font-bold mb-4">ğŸ“  Ø£Ø¬Ù‡Ø²ØªÙ†Ø§ Ù„Ù„ØªØ¹Ø¯ÙŠÙ†</h1>
            <div id="hardware-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Hardware cards will be injected here -->
            </div>
        </section>

        <!-- Page: Create Custom Plan -->
        <section id="create-plan-page" class="page space-y-6">
            <h1 class="text-3xl font-bold">ğŸ’¡ ØµÙ…Ù‘Ù… Ø®Ø·ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©</h1>
            <div>
                <label for="investment_amount" class="block mb-2 text-md font-medium">1. Ø­Ø¯Ø¯ Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±)</label>
                <input type="number" id="investment_amount" class="form-input block w-full p-3 rounded-lg text-center text-xl" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 1000 Ø¯ÙˆÙ„Ø§Ø±" value="1000" min="1000">
            </div>
            <div>
                <label for="investment_duration" class="block mb-2 text-md font-medium">2. Ø­Ø¯Ø¯ Ù…Ø¯Ø© Ø§Ù„Ø¹Ù‚Ø¯ (Ø³Ù†ÙˆØ§Øª)</label>
                <input type="range" id="investment_duration" class="form-range w-full h-2 rounded-lg appearance-none cursor-pointer" min="1" max="3" value="1" step="1">
                <div class="flex justify-between text-xs px-1 mt-1">
                    <span>Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©</span>
                    <span>Ø³Ù†ØªØ§Ù†</span>
                    <span>3 Ø³Ù†ÙˆØ§Øª</span>
                </div>
                <p class="text-center text-xl font-bold mt-2"><span id="duration_display">1</span> Ø³Ù†Ø©</p>
            </div>
            <button id="calculate-plan-btn" class="w-full text-white p-3 rounded-lg font-bold text-lg" style="background-color: var(--tg-theme-button-color);">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©</button>
            
            <div id="plan-results" class="hidden bg-[var(--tg-theme-secondary-bg-color)] p-4 rounded-lg space-y-3">
                <!-- Results will be shown here -->
            </div>
        </section>

        <!-- Page: FAQ -->
        <section id="faq-page" class="page space-y-4">
            <h1 class="text-3xl font-bold">â“ Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©</h1>
            <div id="faq-container" class="space-y-3">
                <!-- FAQ items will be injected here -->
            </div>
        </section>
    </main>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav fixed bottom-0 left-0 right-0 flex justify-around p-2">
        <button data-page="home-page" class="nav-btn active flex flex-col items-center w-full py-1">
            <span class="text-2xl">ğŸ </span><span class="text-xs">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </button>
        <button data-page="plans-page" class="nav-btn flex flex-col items-center w-full py-1">
            <span class="text-2xl">ğŸ“Š</span><span class="text-xs">Ø§Ù„Ø®Ø·Ø·</span>
        </button>
        <button data-page="hardware-page" class="nav-btn flex flex-col items-center w-full py-1">
            <span class="text-2xl">ğŸ“ </span><span class="text-xs">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</span>
        </button>
        <button data-page="create-plan-page" class="nav-btn flex flex-col items-center w-full py-1">
            <span class="text-2xl">ğŸ’¡</span><span class="text-xs">Ø®Ø·Ø© Ø®Ø§ØµØ©</span>
        </button>
        <button data-page="faq-page" class="nav-btn flex flex-col items-center w-full py-1">
            <span class="text-2xl">â“</span><span class="text-xs">Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</span>
        </button>
    </nav>
    
    <!-- Modal for Hardware Details -->
    <div id="hardware-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close-button" onclick="this.parentElement.parentElement.style.display='none'">&times;</span>
        <div id="modal-body" class="text-center"></div>
      </div>
    </div>
    
    <!-- Modal for Plan Confirmation -->
    <div id="plan-confirmation-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div id="plan-modal-body" class="text-center">
            <!-- Plan details will be injected here -->
        </div>
        <div id="plan-modal-footer" class="mt-4 flex justify-around">
            <!-- Yes/No buttons will be injected here -->
        </div>
      </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        const LANG_PACK = {
            ar: {
                // Titles & Nav
                home_title: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ BTC-CloudX",
                home_subtitle: "Ø¨ÙˆØ§Ø¨ØªÙƒ Ø§Ù„Ø¢Ù…Ù†Ø© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ. Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ù…Ø¹Ù†Ø§ Ø§Ù„ÙŠÙˆÙ….",
                plans_title: "ğŸ“Š Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ù…ÙŠØ²Ø©",
                hardware_title: "ğŸ“  Ø£Ø¬Ù‡Ø²ØªÙ†Ø§ Ù„Ù„ØªØ¹Ø¯ÙŠÙ†",
                custom_plan_title: "ğŸ’¡ ØµÙ…Ù‘Ù… Ø®Ø·ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©",
                faq_title: "â“ Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©",
                nav_home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
                nav_plans: "Ø§Ù„Ø®Ø·Ø·",
                nav_hardware: "Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©",
                nav_custom_plan: "Ø®Ø·Ø© Ø®Ø§ØµØ©",
                nav_faq: "Ø§Ù„Ø£Ø³Ø¦Ù„Ø©",
                // Plans
                investment: "Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±",
                hashrate: "Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†ÙŠØ©",
                device: "Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…ØµØ¯Ø±",
                daily_profit: "Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„ØµØ§ÙÙŠ",
                annual_profit: "Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø§Ù„ØµØ§ÙÙŠ",
                semi_annual_bonus: "Ø¹Ø§Ø¦Ø¯ Ù†ØµÙ Ø³Ù†ÙˆÙŠ",
                subscribe_now: "Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†",
                // Hardware
                efficiency: "Ø§Ù„ÙƒÙØ§Ø¡Ø©",
                hardware_modal_info: "Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ÙÙŠ ÙØ¦ØªÙ‡ØŒ ÙˆÙŠØ³ØªØ®Ø¯Ù… ÙÙŠ Ø®Ø·Ø·Ù†Ø§ Ù„Ø¶Ù…Ø§Ù† Ø£Ø¹Ù„Ù‰ Ø¹Ø§Ø¦Ø¯ Ù…Ù…ÙƒÙ† Ù„Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ†.",
                // Custom Plan
                custom_plan_amount_label: "1. Ø­Ø¯Ø¯ Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±)",
                custom_plan_amount_placeholder: "Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 1000 Ø¯ÙˆÙ„Ø§Ø±",
                custom_plan_duration_label: "2. Ø­Ø¯Ø¯ Ù…Ø¯Ø© Ø§Ù„Ø¹Ù‚Ø¯ (Ø³Ù†ÙˆØ§Øª)",
                year_one: "Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©",
                year_two: "Ø³Ù†ØªØ§Ù†",
                year_three: "3 Ø³Ù†ÙˆØ§Øª",
                year_unit: "Ø³Ù†Ø©",
                calculate_button: "Ø§Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©",
                custom_plan_results_title: "Ù†ØªØ§Ø¦Ø¬ Ø®Ø·ØªÙƒ Ø§Ù„Ù…Ø®ØµØµØ©",
                estimated_hashrate: "Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©",
                estimated_daily_profit: "ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ø±",
                total_mining_profit: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø¨Ø­ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†",
                additional_bonus: "Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ (25% ÙƒÙ„ 6 Ø´Ù‡ÙˆØ±)",
                total_estimated: "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹",
                disclaimer: "Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªÙ‚Ø¯ÙŠØ±ÙŠØ© ÙˆØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø´Ø¨ÙƒØ©.",
                submit_plan_button: "Ø£Ø±Ø³Ù„ Ø§Ù„Ø®Ø·Ø© Ù„Ù„Ø¨ÙˆØª ÙˆØ§Ø·Ù„Ø¨Ù‡Ø§",
                // Modals
                confirm_subscription: "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",
                confirm_subscription_q: "Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø®Ø·Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©ØŸ",
                plan: "Ø§Ù„Ø®Ø·Ø©",
                price: "Ø§Ù„Ø³Ø¹Ø±",
                power: "Ø§Ù„Ù‚ÙˆØ©",
                yes_confirm: "Ù†Ø¹Ù…ØŒ Ø£ÙˆØ§ÙÙ‚",
                no_cancel: "Ù„Ø§ØŒ ØªØ±Ø§Ø¬Ø¹",
                // FAQ
                faq_data: [
                    { q: 'Ù…Ø§ Ø·Ø¨ÙŠØ¹Ø© Ø¹Ù…Ù„ÙƒÙ…ØŸ', a: 'Ù†Ø­Ù† Ø´Ø±ÙƒØ© BTC-CloudXØŒ Ù†ÙˆÙØ± Ù„Ùƒ ÙØ±ØµØ© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø¹Ø¨Ø± Ø´Ø±Ø§Ø¡ Ù‚ÙˆØ© ØªØ¹Ø¯ÙŠÙ†ÙŠØ© (Hashrate) Ù…Ù† Ù…Ø²Ø§Ø±Ø¹Ù†Ø§ Ø§Ù„Ù…Ø¬Ù‡Ø²Ø© Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©. Ù†ØªÙˆÙ„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ØŒ Ù…Ù† Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ØŒ ÙˆØ£Ù†Øª ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¨Ø´ÙƒÙ„ ÙŠÙˆÙ…ÙŠ.' },
                    { q: 'ÙƒÙŠÙ ØªÙØ­Ø³Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ØŸ', a: 'ØªØ¹ØªÙ…Ø¯ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ…Ù„ÙƒÙ‡Ø§ØŒ ÙˆØ³Ø¹Ø± Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠØŒ ÙˆØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø´Ø¨ÙƒØ©. ØªÙØ®ØµÙ… Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØŒ ÙˆØ§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù‡Ùˆ Ø±Ø¨Ø­Ùƒ Ø§Ù„ØµØ§ÙÙŠ. Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ†Ø·ÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± ØªÙ‚Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±.' },
                    { q: 'Ù‡Ù„ Ø£Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø£Ùˆ Ø¥Ø«Ø¨Ø§ØªØŸ', a: 'Ù†Ø¹Ù…ØŒ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø£ÙŠ Ø®Ø·Ø©ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø§Ø³ØªØ«Ù…Ø§Ø± Ø±Ù‚Ù…ÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø¹Ù‚Ø¯ÙƒØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ù…ÙØ¹Ø±Ù‘Ù Ø§Ø´ØªØ±Ø§Ùƒ ÙØ±ÙŠØ¯ (ID) Ø®Ø§Øµ Ø¨Ùƒ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ø³ØªØ«Ù…Ø§Ø±Ùƒ.' },
                    { q: 'ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠØŸ', a: 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± Ø²Ø± "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§" ÙÙŠ Ø§Ù„Ø¨ÙˆØªØŒ Ø£Ùˆ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ù‚Ù†Ø§ØªÙ†Ø§ Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ø±Ø¨Ø§Ø­.' }
                ]
            },
            en: {
                home_title: "Welcome to BTC-CloudX",
                home_subtitle: "Your secure gateway to invest in the future of cloud mining. Start your investment journey with us today.",
                plans_title: "ğŸ“Š Featured Investment Plans",
                hardware_title: "ğŸ“  Our Mining Hardware",
                custom_plan_title: "ğŸ’¡ Design Your Investment Plan",
                faq_title: "â“ Frequently Asked Questions",
                nav_home: "Home",
                nav_plans: "Plans",
                nav_hardware: "Hardware",
                nav_custom_plan: "Custom Plan",
                nav_faq: "FAQ",
                investment: "Investment",
                hashrate: "Hashrate",
                device: "Source Device",
                daily_profit: "Net Daily Profit",
                annual_profit: "Net Annual Profit",
                semi_annual_bonus: "Semi-Annual Bonus",
                subscribe_now: "Subscribe Now",
                efficiency: "Efficiency",
                hardware_modal_info: "This device is one of the best in its class, used in our plans to ensure the highest possible return for investors.",
                custom_plan_amount_label: "1. Set Investment Amount (USD)",
                custom_plan_amount_placeholder: "Minimum $1000",
                custom_plan_duration_label: "2. Set Contract Duration (Years)",
                year_one: "1 Year",
                year_two: "2 Years",
                year_three: "3 Years",
                year_unit: "Year",
                calculate_button: "Calculate Plan",
                custom_plan_results_title: "Your Custom Plan Results",
                estimated_hashrate: "Estimated Hashrate",
                estimated_daily_profit: "Estimated Net Daily Profit",
                total_mining_profit: "Total Mining Profit",
                additional_bonus: "Additional Bonus (25% every 6 months)",
                total_estimated: "Total Estimated Return",
                disclaimer: "These figures are estimates and depend on the current Bitcoin price and network difficulty.",
                submit_plan_button: "Send Plan to Bot and Request It",
                confirm_subscription: "Confirm Subscription",
                confirm_subscription_q: "Do you want to confirm your subscription to the following plan?",
                plan: "Plan",
                price: "Price",
                power: "Power",
                yes_confirm: "Yes, I Agree",
                no_cancel: "No, Go Back",
                faq_data: [
                    { q: 'What is the nature of your work?', a: 'We are BTC-CloudX. We provide you with an opportunity to invest in cryptocurrency mining by purchasing hashrate from our farms equipped with the latest hardware. We handle everything, from maintenance to operation, and you receive the profits daily.' },
                    { q: 'How are profits calculated?', a: 'Profits depend on the hashrate you own, the current Bitcoin price, and network difficulty. Electricity and maintenance fees are deducted daily from the gross output, and the remainder is your net profit. Investment involves risks of price volatility.' },
                    { q: 'Do I get a certificate or proof?', a: 'Yes, when you subscribe to any plan, you will receive a digital investment certificate with your contract details, in addition to a unique subscription ID to track your investment.' },
                    { q: 'How can I contact technical support?', a: 'You can contact the support team directly via the "Contact Us" button in the bot, or join our Telegram channel to follow the latest news and profit updates.' }
                ]
            },
            zh: {
                home_title: "æ¬¢è¿æ¥åˆ° BTC-CloudX",
                home_subtitle: "æ‚¨æŠ•èµ„äº‘æŒ–çŸ¿æœªæ¥çš„å®‰å…¨é—¨æˆ·ã€‚ç«‹å³ä¸æˆ‘ä»¬ä¸€èµ·å¼€å§‹æ‚¨çš„æŠ•èµ„ä¹‹æ—…ã€‚",
                plans_title: "ğŸ“Š ç‰¹è‰²æŠ•èµ„è®¡åˆ’",
                hardware_title: "ğŸ“  æˆ‘ä»¬çš„çŸ¿æœºç¡¬ä»¶",
                custom_plan_title: "ğŸ’¡ è®¾è®¡æ‚¨çš„æŠ•èµ„è®¡åˆ’",
                faq_title: "â“ å¸¸è§é—®é¢˜",
                nav_home: "ä¸»é¡µ",
                nav_plans: "è®¡åˆ’",
                nav_hardware: "ç¡¬ä»¶",
                nav_custom_plan: "è‡ªå®šä¹‰è®¡åˆ’",
                nav_faq: "å¸¸è§é—®é¢˜",
                investment: "æŠ•èµ„",
                hashrate: "ç®—åŠ›",
                device: "æºè®¾å¤‡",
                daily_profit: "æ¯æ—¥å‡€åˆ©æ¶¦",
                annual_profit: "å¹´åº¦å‡€åˆ©æ¶¦",
                semi_annual_bonus: "åŠå¹´å¥–é‡‘",
                subscribe_now: "ç«‹å³è®¢é˜…",
                efficiency: "æ•ˆç‡",
                hardware_modal_info: "è¯¥è®¾å¤‡æ˜¯åŒç±»äº§å“ä¸­æœ€å¥½çš„è®¾å¤‡ä¹‹ä¸€ï¼Œç”¨äºæˆ‘ä»¬çš„è®¡åˆ’ï¼Œä»¥ç¡®ä¿ä¸ºæŠ•èµ„è€…å¸¦æ¥å°½å¯èƒ½é«˜çš„å›æŠ¥ã€‚",
                custom_plan_amount_label: "1. è®¾ç½®æŠ•èµ„é‡‘é¢ï¼ˆç¾å…ƒï¼‰",
                custom_plan_amount_placeholder: "æœ€ä½1000ç¾å…ƒ",
                custom_plan_duration_label: "2. è®¾ç½®åˆåŒæœŸé™ï¼ˆå¹´ï¼‰",
                year_one: "1å¹´",
                year_two: "2å¹´",
                year_three: "3å¹´",
                year_unit: "å¹´",
                calculate_button: "è®¡ç®—è®¡åˆ’",
                custom_plan_results_title: "æ‚¨çš„è‡ªå®šä¹‰è®¡åˆ’ç»“æœ",
                estimated_hashrate: "é¢„è®¡ç®—åŠ›",
                estimated_daily_profit: "é¢„è®¡æ¯æ—¥å‡€åˆ©æ¶¦",
                total_mining_profit: "æ€»æŒ–çŸ¿åˆ©æ¶¦",
                additional_bonus: "é¢å¤–å¥–é‡‘ï¼ˆæ¯6ä¸ªæœˆ25%ï¼‰",
                total_estimated: "é¢„è®¡æ€»å›æŠ¥",
                disclaimer: "è¿™äº›æ•°å­—æ˜¯ä¼°ç®—å€¼ï¼Œå–å†³äºå½“å‰çš„æ¯”ç‰¹å¸ä»·æ ¼å’Œç½‘ç»œéš¾åº¦ã€‚",
                submit_plan_button: "å°†è®¡åˆ’å‘é€ç»™æœºå™¨äººå¹¶è¯·æ±‚",
                confirm_subscription: "ç¡®è®¤è®¢é˜…",
                confirm_subscription_q: "æ‚¨è¦ç¡®è®¤è®¢é˜…ä»¥ä¸‹è®¡åˆ’å—ï¼Ÿ",
                plan: "è®¡åˆ’",
                price: "ä»·æ ¼",
                power: "ç®—åŠ›",
                yes_confirm: "æ˜¯çš„ï¼Œæˆ‘åŒæ„",
                no_cancel: "ä¸ï¼Œè¿”å›",
                faq_data: [
                    { q: 'ä½ ä»¬çš„å·¥ä½œæ€§è´¨æ˜¯ä»€ä¹ˆï¼Ÿ', a: 'æˆ‘ä»¬æ˜¯ BTC-CloudXã€‚æˆ‘ä»¬ä¸ºæ‚¨æä¾›æŠ•èµ„åŠ å¯†è´§å¸æŒ–çŸ¿çš„æœºä¼šï¼Œæ‚¨å¯ä»¥ä»æˆ‘ä»¬é…å¤‡æœ€æ–°ç¡¬ä»¶çš„çŸ¿åœºè´­ä¹°ç®—åŠ›ã€‚æˆ‘ä»¬å¤„ç†ä»ç»´æŠ¤åˆ°è¿è¥çš„ä¸€åˆ‡äº‹åŠ¡ï¼Œæ‚¨æ¯å¤©éƒ½èƒ½è·å¾—åˆ©æ¶¦ã€‚' },
                    { q: 'åˆ©æ¶¦æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ', a: 'åˆ©æ¶¦å–å†³äºæ‚¨æ‹¥æœ‰çš„ç®—åŠ›ã€å½“å‰çš„æ¯”ç‰¹å¸ä»·æ ¼å’Œç½‘ç»œéš¾åº¦ã€‚ç”µè´¹å’Œç»´æŠ¤è´¹æ¯å¤©ä»æ€»äº§å‡ºä¸­æ‰£é™¤ï¼Œä½™ä¸‹çš„æ˜¯æ‚¨çš„å‡€åˆ©æ¶¦ã€‚æŠ•èµ„æ¶‰åŠä»·æ ¼æ³¢åŠ¨çš„é£é™©ã€‚' },
                    { q: 'æˆ‘èƒ½è·å¾—è¯ä¹¦æˆ–è¯æ˜å—ï¼Ÿ', a: 'æ˜¯çš„ï¼Œå½“æ‚¨è®¢é˜…ä»»ä½•è®¡åˆ’æ—¶ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€ä»½åŒ…å«åˆåŒè¯¦æƒ…çš„æ•°å­—æŠ•èµ„è¯ä¹¦ï¼Œä»¥åŠä¸€ä¸ªç”¨äºè·Ÿè¸ªæ‚¨æŠ•èµ„çš„å”¯ä¸€è®¢é˜…IDã€‚' },
                    { q: 'æˆ‘å¦‚ä½•è”ç³»æŠ€æœ¯æ”¯æŒï¼Ÿ', a: 'æ‚¨å¯ä»¥ç›´æ¥é€šè¿‡æœºå™¨äººä¸­çš„â€œè”ç³»æˆ‘ä»¬â€æŒ‰é’®è”ç³»æ”¯æŒå›¢é˜Ÿï¼Œæˆ–åŠ å…¥æˆ‘ä»¬çš„Telegramé¢‘é“ä»¥è·å–æœ€æ–°æ¶ˆæ¯å’Œåˆ©æ¶¦æ›´æ–°ã€‚' }
                ]
            }
        };
         let currentLang = localStorage.getItem('appLanguage') || 'ar';

        function translatePage(lang) {
            const translations = LANG_PACK[lang];
            if (!translations) return;

            // Set page direction and font
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.body.style.fontFamily = lang === 'zh' ? "'Noto Sans SC', sans-serif" : (lang === 'en' ? "'Roboto', sans-serif" : "'Cairo', sans-serif");


            // Translate all elements with data-lang-key
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[key]) {
                    el.innerHTML = translations[key];
                }
            });
            
            // Translate all elements with data-lang-placeholder
            document.querySelectorAll('[data-lang-placeholder]').forEach(el => {
                const key = el.getAttribute('data-lang-placeholder');
                if (translations[key]) {
                    el.placeholder = translations[key];
                }
            });

            // Re-render dynamic content
            renderPlansPage(lang);
            renderHardwarePage(lang);
            renderFaqPage(lang);
        }

        // --- CONFIG & DATA ---
        const TELEGRAM_SUPPORT_URL = "https://t.me/BTC_CloudX"; // Replace with your actual support username

        const DATA = {
            HARDWARE: [
                { id: 's21xp_hydro', name: 'Antminer S21 XP Hydro', efficiency: '12.0 J/TH', image: "img/antminer_s21xp_hydro.jpg" },
                { id: 's21xp', name: 'Antminer S21 XP', efficiency: '13.5 J/TH', image: "img/Antminer_S21_XP_270TH.jpg" },
                { id: 'm66s', name: 'WhatsMiner M66S++', efficiency: '14.0 J/TH', image: "img/WhatsMiner_M66S++.jpg" }
            ],
            PLANS: [
                { name: 'Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ (Pro)', price: 200, duration: 12, hashrate: 10, device: 'Antminer S21 XP', daily_profit: 0.41, annual_profit: 148.73, semi_annual_bonus: 50 },
                { name: 'Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Advanced)', price: 500, duration: 12, hashrate: 26, device: 'Antminer S21 XP', daily_profit: 1.06, annual_profit: 386.71, semi_annual_bonus: 125 },
                { name: 'Ø¹Ù‚Ø¯ Ø§Ù„Ù†Ø®Ø¨Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠ (Elite Hydro)', price: 1000, duration: 12, hashrate: 55, device: 'Antminer S21 XP Hydro', daily_profit: 2.41, annual_profit: 878.19, semi_annual_bonus: 250 }
            ],
            FAQ: [
                { q: 'Ù…Ø§ Ø·Ø¨ÙŠØ¹Ø© Ø¹Ù…Ù„ÙƒÙ…ØŸ', a: 'Ù†Ø­Ù† Ø´Ø±ÙƒØ© BTC-CloudXØŒ Ù†ÙˆÙØ± Ù„Ùƒ ÙØ±ØµØ© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø¹Ø¨Ø± Ø´Ø±Ø§Ø¡ Ù‚ÙˆØ© ØªØ¹Ø¯ÙŠÙ†ÙŠØ© (Hashrate) Ù…Ù† Ù…Ø²Ø§Ø±Ø¹Ù†Ø§ Ø§Ù„Ù…Ø¬Ù‡Ø²Ø© Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©. Ù†ØªÙˆÙ„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ØŒ Ù…Ù† Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ØŒ ÙˆØ£Ù†Øª ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¨Ø´ÙƒÙ„ ÙŠÙˆÙ…ÙŠ.' },
                { q: 'ÙƒÙŠÙ ØªÙØ­Ø³Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ØŸ', a: 'ØªØ¹ØªÙ…Ø¯ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ…Ù„ÙƒÙ‡Ø§ØŒ ÙˆØ³Ø¹Ø± Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠØŒ ÙˆØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø´Ø¨ÙƒØ©. ØªÙØ®ØµÙ… Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØŒ ÙˆØ§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù‡Ùˆ Ø±Ø¨Ø­Ùƒ Ø§Ù„ØµØ§ÙÙŠ. Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ†Ø·ÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± ØªÙ‚Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±.' },
                { q: 'Ù‡Ù„ Ø£Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø£Ùˆ Ø¥Ø«Ø¨Ø§ØªØŸ', a: 'Ù†Ø¹Ù…ØŒ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø£ÙŠ Ø®Ø·Ø©ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø§Ø³ØªØ«Ù…Ø§Ø± Ø±Ù‚Ù…ÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø¹Ù‚Ø¯ÙƒØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ù…ÙØ¹Ø±Ù‘Ù Ø§Ø´ØªØ±Ø§Ùƒ ÙØ±ÙŠØ¯ (ID) Ø®Ø§Øµ Ø¨Ùƒ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ø³ØªØ«Ù…Ø§Ø±Ùƒ.' },
                { q: 'ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠØŸ', a: 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± Ø²Ø± "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§" ÙÙŠ Ø§Ù„Ø¨ÙˆØªØŒ Ø£Ùˆ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ù‚Ù†Ø§ØªÙ†Ø§ Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ø±Ø¨Ø§Ø­.' }
            ]
        };

        // --- PAGE NAVIGATION LOGIC ---
        const pages = document.querySelectorAll('.page');
        const navButtons = document.querySelectorAll('.nav-btn');

        function showPage(pageId) {
            pages.forEach(page => page.classList.remove('active'));
            const newPage = document.getElementById(pageId);
            if (newPage) {
                newPage.classList.add('active');
            }
            navButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.page === pageId) {
                    btn.classList.add('active');
                }
            });
            if (tg.HapticFeedback && tg.HapticFeedback.impactOccurred) {
                tg.HapticFeedback.impactOccurred('light');
            }
        }

        navButtons.forEach(button => {
            button.addEventListener('click', () => showPage(button.dataset.page));
        });

        // --- DYNAMIC CONTENT RENDERING ---
        function renderPlansPage(lang) {
            const container = document.getElementById('plans-container');
            const t = LANG_PACK[lang];
            if (!container || !t) return;
            container.innerHTML = DATA.PLANS.map(plan => {
                const planData = encodeURIComponent(JSON.stringify(plan));
                return `
                <div class="bg-[var(--tg-theme-secondary-bg-color)] p-4 rounded-xl border border-[#30363d] shadow-lg">
                    <h2 class="text-2xl font-bold text-green-400">${plan.name[lang]}</h2>
                    <div class="mt-3 space-y-2 text-md">
                        <p><strong>ğŸ’° ${t.investment}:</strong> <span class="font-bold text-white">$${plan.price}</span></p>
                        <p><strong>âš™ï¸ ${t.hashrate}:</strong> <span class="font-bold text-white">${plan.hashrate} TH/s</span></p>
                        <p><strong>ğŸ”Œ ${t.device}:</strong> <span class="font-bold text-white">${plan.device}</span></p>
                        <hr class="border-gray-600 my-2">
                        <p><strong>ğŸ“ˆ ${t.daily_profit}:</strong> <span class="font-bold text-green-300">~$${plan.daily_profit.toFixed(2)}</span></p>
                        <p><strong>ğŸ“… ${t.annual_profit}:</strong> <span class="font-bold text-green-300">~$${plan.annual_profit.toFixed(2)}</span></p>
                        <p><strong>ğŸ ${t.semi_annual_bonus}:</strong> <span class="font-bold text-blue-300">+$${plan.semi_annual_bonus.toFixed(2)}</span></p>
                    </div>
                    <button onclick='showPlanConfirmationModal(JSON.parse(decodeURIComponent("${planData}")))' class="w-full mt-4 text-white p-3 rounded-lg font-bold" style="background-color: var(--tg-theme-button-color);">${t.subscribe_now}</button>
                </div>`;
            }).join('');
        }


        function renderHardwarePage() {
            const container = document.getElementById('hardware-container');
            if (!container) return;
            container.innerHTML = DATA.HARDWARE.map(device => `
                <div class="bg-[var(--tg-theme-secondary-bg-color)] p-4 rounded-xl border border-[#30363d] text-center cursor-pointer transform hover:scale-105 transition-transform duration-300" onclick="showHardwareModal('${device.id}')">
                    <img src="${device.image}" alt="${device.name}" class="rounded-md w-full h-40 object-cover mb-3">
                    <h2 class="text-xl font-bold">${device.name}</h2>
                    <p class="text-gray-400">Ø§Ù„ÙƒÙØ§Ø¡Ø©: ${device.efficiency}</p>
                </div>
            `).join('');
        }
        function renderHardwarePage(lang) {
            const container = document.getElementById('hardware-container');
            const t = LANG_PACK[lang];
            if (!container || !t) return;
            container.innerHTML = DATA.HARDWARE.map(device => `
                <div class="bg-[var(--tg-theme-secondary-bg-color)] p-4 rounded-xl border border-[#30363d] text-center cursor-pointer" onclick="showHardwareModal('${device.id}')">
                    <img src="${device.image}" alt="${device.name}" class="rounded-md w-full h-40 object-cover mb-3">
                    <h2 class="text-xl font-bold">${device.name}</h2>
                    <p class="text-gray-400">${t.efficiency}: ${device.efficiency}</p>
                </div>`).join('');
        }

        function renderFaqPage(lang) {
            const container = document.getElementById('faq-container');
            const t = LANG_PACK[lang];
            if (!container || !t || !t.faq_data) return;
            container.innerHTML = t.faq_data.map(item => `
                <div class="bg-[var(--tg-theme-secondary-bg-color)] rounded-lg border border-[#30363d]">
                    <button class="accordion-toggle w-full p-4 text-right font-bold flex justify-between items-center">
                        <span>${item.q}</span><span class="transform transition-transform duration-300 text-xl">+</span>
                    </button>
                    <div class="accordion-content px-4 pb-4 text-gray-300"><p>${item.a}</p></div>
                </div>`).join('');
            
            document.querySelectorAll('.accordion-toggle').forEach(button => {
                button.addEventListener('click', (event) => {
                    const content = event.currentTarget.nextElementSibling;
                    const isOpen = content.style.maxHeight && content.style.maxHeight !== "0px";
                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                    document.querySelectorAll('.accordion-toggle span:last-child').forEach(i => i.style.transform = 'rotate(0deg)');
                    if (!isOpen) {
                        content.style.maxHeight = content.scrollHeight + "px";
                        event.currentTarget.querySelector('span:last-child').style.transform = 'rotate(45deg)';
                    }
                });
            });
        }

        function renderFaqPage() {
            const container = document.getElementById('faq-container');
            if (!container) return;
            container.innerHTML = DATA.FAQ.map((item, index) => `
                <div class="bg-[var(--tg-theme-secondary-bg-color)] rounded-lg border border-[#30363d]">
                    <button class="accordion-toggle w-full p-4 text-right font-bold flex justify-between items-center" data-index="${index}">
                        <span>${item.q}</span>
                        <span class="transform transition-transform duration-300 text-xl">+</span>
                    </button>
                    <div class="accordion-content px-4 pb-4 text-gray-300">
                        <p>${item.a}</p>
                    </div>
                </div>
            `).join('');
            
            document.querySelectorAll('.accordion-toggle').forEach(button => {
                button.addEventListener('click', (event) => {
                    const currentButton = event.currentTarget;
                    const content = currentButton.nextElementSibling;
                    const icon = currentButton.querySelector('span:last-child');
                    const isOpen = content.style.maxHeight && content.style.maxHeight !== "0px";

                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                    document.querySelectorAll('.accordion-toggle span:last-child').forEach(i => i.style.transform = 'rotate(0deg)');

                    if (!isOpen) {
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.style.transform = 'rotate(45deg)';
                    }
                });
            });
        }

        // --- MODAL LOGIC ---
        const hardwareModal = document.getElementById('hardware-modal');
        const modalBody = document.getElementById('modal-body');
        const planModal = document.getElementById('plan-confirmation-modal');
        const planModalBody = document.getElementById('plan-modal-body');
        const planModalFooter = document.getElementById('plan-modal-footer');

        function showHardwareModal(deviceId) {
            const device = DATA.HARDWARE.find(d => d.id === deviceId);
            const t = LANG_PACK[currentLang];
            if (!device) return;
            hardwareModal.querySelector('#modal-body').innerHTML = `
                <img src="${device.image}" alt="${device.name}" class="rounded-lg w-full mb-4">
                <h2 class="text-2xl font-bold">${device.name}</h2>
                <p class="text-lg text-gray-300 mt-2">${t.efficiency}: ${device.efficiency}</p>
                <p class="mt-4 text-gray-400">${t.hardware_modal_info}</p>`;
            hardwareModal.style.display = 'flex';
            
        }

        function showPlanConfirmationModal(plan) {
            const t = LANG_PACK[currentLang];
            if (!plan || !t) return;
            planModal.querySelector('#plan-modal-body').innerHTML = `
                <h3 class="text-xl font-bold mb-3">${t.confirm_subscription}</h3>
                <p class="mb-4">${t.confirm_subscription_q}</p>
                <div class="text-right space-y-2 p-3 bg-[#010409] rounded-lg border border-gray-700">
                    <p><strong>${t.plan}:</strong> ${plan.name[currentLang]}</p>
                    <p><strong>${t.price}:</strong> $${plan.price}</p>
                    <p><strong>${t.power}:</strong> ${plan.hashrate} TH/s</p>
                </div>`;
            planModal.querySelector('#plan-modal-footer').innerHTML = `
                <button onclick="redirectToSupport()" class="w-2/5 text-white p-2 rounded-lg font-bold bg-green-600 hover:bg-green-700">${t.yes_confirm}</button>
                <button onclick="planModal.style.display='none'" class="w-2/5 text-white p-2 rounded-lg font-bold bg-red-600 hover:bg-red-700">${t.no_cancel}</button>`;
            planModal.style.display = 'flex';
        }

        function redirectToSupport() {
            tg.openTelegramLink(TELEGRAM_SUPPORT_URL);
            planModal.style.display = 'none';
        }

        window.onclick = (event) => {
            if (event.target == hardwareModal || event.target == planModal) {
                event.target.style.display = "none";
            }
        };
        hardwareModal.querySelector('.close-button').onclick = () => hardwareModal.style.display = 'none';
        planModal.querySelector('.close-button').onclick = () => planModal.style.display = 'none';


        // --- CREATE CUSTOM PLAN LOGIC ---
        const investmentAmountInput = document.getElementById('investment_amount');
        const durationInput = document.getElementById('investment_duration');
        const durationDisplay = document.getElementById('duration_display');
        const calculateBtn = document.getElementById('calculate-plan-btn');
        const resultsDiv = document.getElementById('plan-results');
        const t = LANG_PACK[currentLang];


        durationInput.addEventListener('input', () => {
            durationDisplay.textContent = durationInput.value;
        });

        calculateBtn.addEventListener('click', () => {
            const amount = parseFloat(investmentAmountInput.value);
            const durationYears = parseInt(durationInput.value);

            if (isNaN(amount) || amount < 1000) {
                tg.showAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº Ø§Ø³ØªØ«Ù…Ø§Ø± ØµØ§Ù„Ø­ (1000 Ø¯ÙˆÙ„Ø§Ø± ÙƒØ­Ø¯ Ø£Ø¯Ù†Ù‰).');
                return;
            }

            // Simplified calculation logic based on Elite Hydro plan for amounts >= 1000
            const pricePerTh = 1000 / 55; // approx 18.18
            const totalHashrate = amount / pricePerTh;
            const netDailyProfitPerTh = 2.41 / 55; // From Elite Hydro plan
            
            const netDailyProfit = totalHashrate * netDailyProfitPerTh;
            const netAnnualProfit = netDailyProfit * 365;
            const baseProfit = netAnnualProfit * durationYears;
            
            // Calculate the 25% semi-annual bonus
            const semiAnnualBonus = amount * 0.25 * durationYears * 2;
            const totalProfit = baseProfit + semiAnnualBonus;

            resultsDiv.innerHTML = `
                <h3 class="text-xl font-bold text-center text-green-400">Ù†ØªØ§Ø¦Ø¬ Ø®Ø·ØªÙƒ Ø§Ù„Ù…Ø®ØµØµØ©</h3>
                <p><strong>- Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©:</strong> ${totalHashrate.toFixed(2)} TH/s</p>
                <p><strong>- ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ø±:</strong> ~$${netDailyProfit.toFixed(2)}</p>
                <hr class="border-gray-600 my-2">
                <p><strong>- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø¨Ø­ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† (${durationYears} Ø³Ù†ÙˆØ§Øª):</strong> ~$${baseProfit.toFixed(2)}</p>
                <p class="text-blue-300"><strong>- Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ (25% ÙƒÙ„ 6 Ø´Ù‡ÙˆØ±):</strong> +$${semiAnnualBonus.toFixed(2)}</p>
                <hr class="border-gray-600 my-2">
                <p class="font-bold text-white text-xl">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: ~$${totalProfit.toFixed(2)}</p>
                <p class="text-xs text-gray-400 mt-2">Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªÙ‚Ø¯ÙŠØ±ÙŠØ© ÙˆØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø´Ø¨ÙƒØ©.</p>
                <button id="submit-plan-btn" class="w-full mt-4 text-white p-3 rounded-lg font-bold" style="background-color: var(--tg-theme-button-color);">Ø£Ø±Ø³Ù„ Ø§Ù„Ø®Ø·Ø© Ù„Ù„Ø¨ÙˆØª ÙˆØ§Ø·Ù„Ø¨Ù‡Ø§</button>
            `;
            resultsDiv.classList.remove('hidden');

            document.getElementById('submit-plan-btn').addEventListener('click', () => {
                const dataToSend = {
                    action: 'create_custom_plan',
                    payload: {
                        investment: amount,
                        duration: durationYears,
                        hashrate: totalHashrate.toFixed(2),
                        totalProfit: totalProfit.toFixed(2)
                    }
                };
                tg.sendData(JSON.stringify(dataToSend));
            });
            tg.HapticFeedback.impactOccurred('medium');
        });

        // --- INITIALIZE APP ---
        document.addEventListener('DOMContentLoaded', () => {
            renderPlansPage();
            renderHardwarePage();
            renderFaqPage();
            showPage('home-page');
        });
    </script>
</body>
</html>
